<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resolver Preguntas - InteracQuiz</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #e8f5f3 0%, #d4f1ec 100%);
            min-height: 100vh;
            color: #2d3748;
        }

        /* Header */
        .header {
            background: white;
            padding: 1rem 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.5rem;
            font-weight: bold;
            color: #319795;
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            background: #319795;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .nav {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .nav-btn {
    background: transparent;
    border: none;
    color: #718096;
    font-weight: 500;
    padding: 0.75rem 1.5rem;
    cursor: pointer;
    font-size: 0.9rem;
    transition: all 0.2s ease;
    border-radius: 4px;
    position: relative;
}

.nav-btn:hover {
    color: #38b2ac;
    background: #f0fdfa;
}

.nav-btn.active {
    color: white;
    background: #38b2ac;
}

        .nav-link {
            text-decoration: none;
            color: #4a5568;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            transition: all 0.2s;
        }

        .nav-link:hover {
            background: #e6fffa;
            color: #319795;
        }

        .nav-link.active {
            background: #319795;
            color: white;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            background: #38b2ac;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            cursor: pointer;
        }

        /* Main Content */
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem;
        }

        .page-title {
            font-size: 2rem;
            font-weight: bold;
            text-align: center;
            margin-bottom: 3rem;
            color: #2d3748;
        }

        /* Question Cards */
        .question-card {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            position: relative;
        }

        .edit-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: transparent;
            border: 1px solid #319795;
            color: #319795;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s;
        }

        .edit-btn:hover {
            background: #319795;
            color: white;
        }

        .question-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 0.5rem;
        }

        .question-subtitle {
            color: #718096;
            margin-bottom: 1.5rem;
            line-height: 1.5;
        }

        /* Word Ordering Question */
        .words-section {
            margin-bottom: 1.5rem;
        }

        .section-label {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 0.75rem;
        }

        .words-container {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .word-chip {
            background: #e6fffa;
            color: #319795;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: grab;
            user-select: none;
            transition: all 0.2s;
            border: 2px solid transparent;
        }

        .word-chip:hover {
            background: #b2f5ea;
            transform: translateY(-1px);
        }

        .word-chip.dragging {
            opacity: 0.5;
            cursor: grabbing;
        }

        .word-chip.used {
            background: #cbd5e0;
            color: #718096;
            cursor: not-allowed;
        }

        .answer-area {
            min-height: 60px;
            border: 2px dashed #cbd5e0;
            border-radius: 8px;
            padding: 1rem;
            background: #f7fafc;
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            align-items: flex-start;
            transition: border-color 0.2s;
        }

        .answer-area.drag-over {
            border-color: #319795;
            background: #e6fffa;
        }

        .answer-area:empty::before {
            content: "Arrastra las palabras aquí para formar tu respuesta...";
            color: #a0aec0;
            font-style: italic;
        }

        /* Correction Question */
        .original-sentence {
            background: #fef5e7;
            border-left: 4px solid #ed8936;
            padding: 1rem;
            border-radius: 0 8px 8px 0;
            margin-bottom: 1.5rem;
            font-style: italic;
        }

        .correction-textarea {
            width: 100%;
            min-height: 100px;
            padding: 1rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            resize: vertical;
            transition: border-color 0.2s;
        }

        .correction-textarea:focus {
            outline: none;
            border-color: #319795;
        }

        /* Submit Button */
        .submit-btn {
            background: #319795;
            color: white;
            border: none;
            padding: 0.75rem 2rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            float: right;
            margin-top: 1rem;
        }

        .submit-btn:hover {
            background: #2c7a7b;
            transform: translateY(-1px);
        }

        .submit-btn:disabled {
            background: #cbd5e0;
            color: #718096;
            cursor: not-allowed;
            transform: none;
        }

        /* Feedback */
        .feedback {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 8px;
            display: none;
        }

        .feedback.correct {
            background: #c6f6d5;
            border-left: 4px solid #38a169;
            color: #22543d;
        }

        .feedback.incorrect {
            background: #fed7d7;
            border-left: 4px solid #e53e3e;
            color: #742a2a;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            .question-card {
                padding: 1.5rem;
            }

            .words-container {
                justify-content: center;
            }

            .submit-btn {
                float: none;
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="logo">
            <div class="logo-icon">IQ</div>
            InteracQuiz
        </div>
        <nav class="nav">
            <button class="nav-btn active" onclick="location.href='Inicio.html'">Inicio</button>
                <button class="nav-btn" onclick="location.href='crearPregunta.html'">Crear Pregunta</button>
                <button class="nav-btn" onclick="location.href='Resolver.html'">Resolver</button>
                <button class="nav-btn" onclick="location.href='perfil.html'">Mi Perfil</button>
            <div class="user-avatar">U</div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="container">
        <h1 class="page-title">Resolver Preguntas</h1>

        <!-- Question 1: Word Ordering -->
        <div class="question-card">
            <button class="edit-btn">✏️ Editar</button>
            <h2 class="question-title">Ordena las palabras para formar una oración</h2>
            <p class="question-subtitle">Arrastra las palabras para formar una oración coherente sobre el clima.</p>
            
            <div class="words-section">
                <div class="section-label">Palabras disponibles:</div>
                <div class="words-container" id="wordsContainer1">
                    <div class="word-chip" draggable="true" data-word="despejado">despejado</div>
                    <div class="word-chip" draggable="true" data-word="El">El</div>
                    <div class="word-chip" draggable="true" data-word="hoy">hoy</div>
                    <div class="word-chip" draggable="true" data-word="cielo">cielo</div>
                    <div class="word-chip" draggable="true" data-word="está">está</div>
                </div>
            </div>

            <div class="words-section">
                <div class="section-label">Tu respuesta:</div>
                <div class="answer-area" id="answerArea1"></div>
            </div>

            <button class="submit-btn" onclick="checkAnswer1()">Comprobar Respuesta</button>
            <div class="feedback" id="feedback1"></div>
            <div style="clear: both;"></div>
        </div>

        <!-- Question 2: Correction -->
        <div class="question-card">
            <button class="edit-btn">✏️ Editar</button>
            <h2 class="question-title">Corrige la incoherencia</h2>
            <p class="question-subtitle">Identifica y corrige la incoherencia en la siguiente oración.</p>
            
            <div class="original-sentence">
                El perro vuela sobre el piano mientras toca una melodía.
            </div>

            <div class="words-section">
                <div class="section-label">Corrige la oración:</div>
                <textarea 
                    class="correction-textarea" 
                    id="correctionText"
                    placeholder="Escribe la versión corregida"
                ></textarea>
            </div>

            <button class="submit-btn" onclick="checkAnswer2()">Comprobar Respuesta</button>
            <div class="feedback" id="feedback2"></div>
            <div style="clear: both;"></div>
        </div>
    </main>

    <script>
        // Question 1: Word Ordering Logic
        let draggedElement = null;
        let answerWords = [];

        // Add drag and drop functionality
        document.addEventListener('DOMContentLoaded', function() {
            const wordChips = document.querySelectorAll('.word-chip');
            const answerArea = document.getElementById('answerArea1');

            wordChips.forEach(chip => {
                chip.addEventListener('dragstart', handleDragStart);
                chip.addEventListener('dragend', handleDragEnd);
            });

            answerArea.addEventListener('dragover', handleDragOver);
            answerArea.addEventListener('drop', handleDrop);
            answerArea.addEventListener('dragenter', handleDragEnter);
            answerArea.addEventListener('dragleave', handleDragLeave);
        });

        function handleDragStart(e) {
            draggedElement = this;
            this.classList.add('dragging');
            e.dataTransfer.effectAllowed = 'move';
        }

        function handleDragEnd(e) {
            this.classList.remove('dragging');
            draggedElement = null;
        }

        function handleDragOver(e) {
            e.preventDefault();
            e.dataTransfer.dropEffect = 'move';
        }

        function handleDragEnter(e) {
            e.preventDefault();
            this.classList.add('drag-over');
        }

        function handleDragLeave(e) {
            this.classList.remove('drag-over');
        }

        function handleDrop(e) {
            e.preventDefault();
            this.classList.remove('drag-over');
            
            if (draggedElement && !draggedElement.classList.contains('used')) {
                // Clone the word chip for the answer area
                const clonedChip = draggedElement.cloneNode(true);
                clonedChip.classList.remove('dragging');
                clonedChip.classList.add('answer-word');
                clonedChip.draggable = false;
                
                // Add remove functionality
                clonedChip.addEventListener('click', function() {
                    const originalWord = draggedElement.getAttribute('data-word');
                    // Find and re-enable the original word
                    const originalChip = document.querySelector(`[data-word="${originalWord}"]`);
                    if (originalChip) {
                        originalChip.classList.remove('used');
                    }
                    // Remove from answer
                    this.remove();
                    updateAnswerWords();
                });

                this.appendChild(clonedChip);
                draggedElement.classList.add('used');
                updateAnswerWords();
            }
        }

        function updateAnswerWords() {
            const answerArea = document.getElementById('answerArea1');
            answerWords = Array.from(answerArea.children).map(chip => 
                chip.getAttribute('data-word') || chip.textContent
            );
        }

        function checkAnswer1() {
            const correctAnswer = ['El', 'cielo', 'está', 'despejado', 'hoy'];
            const feedback = document.getElementById('feedback1');
            
            const isCorrect = JSON.stringify(answerWords) === JSON.stringify(correctAnswer);
            
            feedback.style.display = 'block';
            if (isCorrect) {
                feedback.className = 'feedback correct';
                feedback.textContent = '¡Excelente! Has formado la oración correctamente: "El cielo está despejado hoy"';
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = 'Intenta de nuevo. Recuerda que la oración debe tener sentido gramaticalmente.';
            }
        }

        // Question 2: Correction Logic
        function checkAnswer2() {
            const userAnswer = document.getElementById('correctionText').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback2');
            
            // Possible correct answers (simplified check)
            const correctAnswers = [
                'el perro ladra mientras el pianista toca una melodía',
                'el perro está junto al piano mientras alguien toca una melodía',
                'el pianista toca una melodía mientras el perro está cerca del piano'
            ];
            
            feedback.style.display = 'block';
            
            if (userAnswer.length === 0) {
                feedback.className = 'feedback incorrect';
                feedback.textContent = 'Por favor, escribe una corrección para la oración.';
                return;
            }

            // Simple check for key corrections
            const hasCorrection = userAnswer.includes('ladra') || 
                                userAnswer.includes('pianista') || 
                                userAnswer.includes('músico') ||
                                !userAnswer.includes('vuela');
            
            if (hasCorrection) {
                feedback.className = 'feedback correct';
                feedback.textContent = '¡Muy bien! Has identificado y corregido la incoherencia. Los perros no pueden volar.';
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = 'Piensa en qué parte de la oración no tiene sentido. ¿Pueden los perros volar?';
            }
        }

        // Edit button functionality
        document.querySelectorAll('.edit-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                alert('Función de edición - Aquí podrías modificar la pregunta');
            });
        });

        // Reset functionality for question 1
        function resetQuestion1() {
            const answerArea = document.getElementById('answerArea1');
            const wordChips = document.querySelectorAll('.word-chip');
            
            // Clear answer area
            answerArea.innerHTML = '';
            
            // Reset all word chips
            wordChips.forEach(chip => {
                chip.classList.remove('used');
            });
            
            // Clear feedback
            document.getElementById('feedback1').style.display = 'none';
            answerWords = [];
        }

        // Add double-click to reset
        document.getElementById('answerArea1').addEventListener('dblclick', resetQuestion1);
    </script>
</body>
</html>